.class public Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$DistanceFetcher;
.super Ljava/lang/Object;
.source "BotClient.java"
.implements Ljava/lang/Runnable;

.field private final view:Landroid/widget/TextView;

.method public constructor <init>(Landroid/widget/TextView;)V
    .registers 2
    .param p1, "v"  # Landroid/widget/TextView;

    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
    iput-object p1, p0, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$DistanceFetcher;->view:Landroid/widget/TextView;
    return-void
.end method

.method public run()V
    .registers 6

    .line 1
    :try_start_0
    new-instance v0, Lokhttp3/Request$Builder;
    invoke-direct {v0}, Lokhttp3/Request$Builder;-><init>()V
    const-string v1, "https://asistente-web-r2qs.onrender.com"
    invoke-virtual {v0, v1}, Lokhttp3/Request$Builder;->l(Ljava/lang/String;)Lokhttp3/Request$Builder;
    move-result-object v0
    invoke-virtual {v0}, Lokhttp3/Request$Builder;->b()Lokhttp3/Request;
    move-result-object v0

    .line 2
    # Accessing client from BotClient. Need to ensure it is accessible.
    # Assuming valid accessor or package access if same package.
    # Since private, I might need to change BotClient or use reflection? 
    # Or just new instance for safety if I don't want to edit BotClient visibility yet.
    # However, creating new OkHttpClient is expensive. I'll modify BotClient to make 'client' public.
    sget-object v1, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient;->client:Lokhttp3/OkHttpClient;
    
    invoke-virtual {v1, v0}, Lokhttp3/OkHttpClient;->a(Lokhttp3/Request;)Lokhttp3/Call;
    move-result-object v0
    invoke-interface {v0}, Lokhttp3/Call;->execute()Lokhttp3/Response;
    move-result-object v0

    .line 3
    invoke-virtual {v0}, Lokhttp3/Response;->isSuccessful()Z
    move-result v1
    if-eqz v1, :cond_fail

    invoke-virtual {v0}, Lokhttp3/Response;->k()Lokhttp3/ResponseBody;
    move-result-object v1
    if-eqz v1, :cond_fail

    invoke-virtual {v1}, Lokhttp3/ResponseBody;->C()Ljava/lang/String;
    move-result-object v1
    
    # Success, post result
    iget-object v2, p0, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$DistanceFetcher;->view:Landroid/widget/TextView;
    new-instance v3, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$UiUpdater;
    invoke-direct {v3, v2, v1}, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$UiUpdater;-><init>(Landroid/widget/TextView;Ljava/lang/String;)V
    invoke-virtual {v2, v3}, Landroid/widget/TextView;->post(Ljava/lang/Runnable;)Z
    goto :goto_end

    :cond_fail
    const-string v1, "Error datos"
    iget-object v2, p0, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$DistanceFetcher;->view:Landroid/widget/TextView;
    new-instance v3, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$UiUpdater;
    invoke-direct {v3, v2, v1}, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$UiUpdater;-><init>(Landroid/widget/TextView;Ljava/lang/String;)V
    invoke-virtual {v2, v3}, Landroid/widget/TextView;->post(Ljava/lang/Runnable;)Z

    :goto_end
    :try_end_50
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_50} :catch_51

    goto :goto_ret

    :catch_51
    move-exception v0
    const-string v1, "Error red"
    iget-object v2, p0, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$DistanceFetcher;->view:Landroid/widget/TextView;
    new-instance v3, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$UiUpdater;
    invoke-direct {v3, v2, v1}, Lsinet/startup/inDriver/city/driver/order/ui/info/BotClient$UiUpdater;-><init>(Landroid/widget/TextView;Ljava/lang/String;)V
    invoke-virtual {v2, v3}, Landroid/widget/TextView;->post(Ljava/lang/Runnable;)Z

    :goto_ret
    return-void
.end method
