.class final Lsinet/startup/inDriver/ui/FloatingMenu$4;
.super Ljava/lang/Object;
.source "FloatingMenu.java"
.implements Landroid/view/View$OnTouchListener;

.field private initialX:I
.field private initialY:I
.field private initialTouchX:F
.field private initialTouchY:F

.method constructor <init>()V
    .registers 1
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
    return-void
.end method

.method public onTouch(Landroid/view/View;Landroid/view/MotionEvent;)Z
    .registers 10
    .param p1, "v"    # Landroid/view/View;
    .param p2, "event"    # Landroid/view/MotionEvent;

    invoke-virtual {p2}, Landroid/view/MotionEvent;->getAction()I
    move-result v0
    const/4 v1, 0x1

    packed-switch v0, :pswitch_data_1e

    :cond_default
    const/4 v1, 0x0
    return v1

    :pswitch_down
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getLogoParams()Landroid/view/WindowManager$LayoutParams;
    move-result-object v2
    iget v2, v2, Landroid/view/WindowManager$LayoutParams;->x:I
    iput v2, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialX:I

    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getLogoParams()Landroid/view/WindowManager$LayoutParams;
    move-result-object v2
    iget v2, v2, Landroid/view/WindowManager$LayoutParams;->y:I
    iput v2, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialY:I

    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawX()F
    move-result v2
    iput v2, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialTouchX:F

    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawY()F
    move-result v2
    iput v2, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialTouchY:F
    
    return v1

    :pswitch_up
    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawX()F
    move-result v2
    iget v3, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialTouchX:F
    sub-float/2addr v2, v3
    invoke-static {v2}, Ljava/lang/Math;->abs(F)F
    move-result v2

    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawY()F
    move-result v3
    iget v4, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialTouchY:F
    sub-float/2addr v3, v4
    invoke-static {v3}, Ljava/lang/Math;->abs(F)F
    move-result v3

    const/high16 v4, 0x41200000 # 10.0f
    
    # --- Check for Dismiss (Drop at Bottom) ---
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getContext()Landroid/app/Activity;
    move-result-object v5
    if-eqz v5, :cond_check_click
    
    invoke-virtual {v5}, Landroid/app/Activity;->getResources()Landroid/content/res/Resources;
    move-result-object v5
    invoke-virtual {v5}, Landroid/content/res/Resources;->getDisplayMetrics()Landroid/util/DisplayMetrics;
    move-result-object v5
    iget v5, v5, Landroid/util/DisplayMetrics;->heightPixels:I
    
    # Threshold: Bottom 250px
    const/16 v6, 0xfa # 250px
    sub-int/2addr v5, v6
    int-to-float v5, v5
    
    # Current Y
    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawY()F
    move-result v6
    
    cmpl-float v5, v6, v5
    if-lez v5, :cond_check_click
    
    # Dropped at bottom -> Dismiss
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->dismiss()V
    return v1
    
    :cond_check_click
    # --- End Dismiss Check ---

    cmpg-float v5, v2, v4
    if-gez v5, :cond_click
    cmpg-float v5, v3, v4
    if-gez v5, :cond_click
    
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->showMenuAndHideLogo()V
    
    :cond_click
    return v1

    :pswitch_move
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getLogoParams()Landroid/view/WindowManager$LayoutParams;
    move-result-object v2
    
    iget v3, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialX:I
    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawX()F
    move-result v0
    iget v1, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialTouchX:F
    sub-float/2addr v0, v1
    float-to-int v0, v0
    add-int/2addr v3, v0
    iput v3, v2, Landroid/view/WindowManager$LayoutParams;->x:I

    iget v3, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialY:I
    invoke-virtual {p2}, Landroid/view/MotionEvent;->getRawY()F
    move-result v0
    iget v1, p0, Lsinet/startup/inDriver/ui/FloatingMenu$4;->initialTouchY:F
    sub-float/2addr v0, v1
    float-to-int v0, v0
    add-int/2addr v3, v0
    iput v3, v2, Landroid/view/WindowManager$LayoutParams;->y:I

    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getWm()Landroid/view/WindowManager;
    move-result-object v0
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getLogoView()Landroid/widget/ImageView;
    move-result-object v1
    invoke-static {}, Lsinet/startup/inDriver/ui/FloatingMenu;->access$getLogoParams()Landroid/view/WindowManager$LayoutParams;
    move-result-object v2
    invoke-interface {v0, v1, v2}, Landroid/view/WindowManager;->updateViewLayout(Landroid/view/View;Landroid/view/ViewGroup$LayoutParams;)V
    const/4 v1, 0x1
    return v1

    :pswitch_data_1e
    .packed-switch 0x0
        :pswitch_down
        :pswitch_up
        :pswitch_move
    .end packed-switch
.end method
